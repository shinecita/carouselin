{"version":3,"file":"ngx-carouselin.component.js","sourceRoot":"","sources":["../../../src/ngx-carouselin/ngx-carouselin.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Renderer,\n  OnInit,\n  OnChanges,\n  Input,\n  ViewChild,\n  SimpleChanges\n} from '@angular/core';\n\n/**\n * Neverending Carousel \n * // TODO add comments here\n */\n@Component({\n  selector: 'ngx-carouselin',\n  templateUrl: 'ngx-carouselin.component.html'\n})\n\nexport class NgxCarouselinComponent implements AfterViewInit, OnInit, OnChanges {\n\n  @ViewChild('content') public contentRef: ElementRef;\n\n  @ViewChild('carouselin', { read: ElementRef })\n  private carouselMain1: ElementRef;\n\n  @ViewChild('carouselinItems', { read: ElementRef })\n  private carouselInner1: ElementRef;\n\n  @Input() options: any;\n  @Input() currentSlide: number;\n\n\n  private carousel: any;\n  private carouselMain: any;\n  private carouselInner: any;\n  private carouselItems: any;\n  private center: number;\n  private itemWidth: number;\n  private contentIsStale: boolean;\n\n\n  constructor(\n    private ChangeDetectorRef: ChangeDetectorRef,\n    private el: ElementRef,\n    private renderer: Renderer\n  ) {\n    this.contentIsStale = true;\n  }\n\n  ngOnInit() {\n    this.carouselMain = this.carouselMain1.nativeElement;\n    this.carouselInner = this.carouselInner1.nativeElement;\n    this.carouselItems = this.carouselInner.getElementsByClassName('ngx-carouselin-item');\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (this.currentSlide !== undefined && !changes.currentSlide.isFirstChange()) {\n        this.move();\n        this.setFade();\n      }\n  }\n\n  ngAfterViewInit() {\n    this.itemWidth = this.carouselItems[0].clientWidth + 4;\n    this.center = Math.floor(this.carouselItems.length / 2);\n    this.setLayout();\n    this.move();\n  }\n\n  private setStyle(el: any, prop: any, val: any): void {\n    this.renderer.setElementStyle(el, prop, val);\n  }\n\n  private setFade() {\n    const lastSlide = (this.currentSlide + this.center) % this.carouselItems.length;\n    const firstSlide = (this.currentSlide + this.center + 1) % this.carouselItems.length;\n\n    this.renderer.setElementClass(this.carouselItems[lastSlide], 'faded', true);\n    this.renderer.setElementClass(this.carouselItems[firstSlide], 'faded', true);\n  }\n\n  private setLayout(): void {\n    // check if its even and center using item element center\n    if (this.carouselItems.length % 2 === 0) {\n      const itemCenter = (this.itemWidth / 2);\n      this.renderer.setElementStyle(this.carouselMain, 'left', `-${itemCenter}px`);\n    }\n  }\n\n  private move() {\n    const moveSteps = this.currentSlide - this.center;\n    if (moveSteps < 0) {\n        this.moveToRight(Math.abs(moveSteps));\n    } else if (moveSteps > 0) {\n        this.moveToLeft(Math.abs(moveSteps));\n    } else {\n       this.moveToLeft(this.carouselItems.length);\n    }\n  }\n\n  /**\n   * Move the Carousel to the right a\n   * @param position : number of places to move\n   */\n  public moveToRight(position: number): void {\n    let moveUnit = this.itemWidth * position;\n    for (let i = 0; i < this.carouselItems.length; i++) {\n      if (i === (this.carouselItems.length - position)) {\n        moveUnit = -(this.itemWidth * (this.carouselItems.length - position));\n      }\n      this.transform(i, moveUnit);\n    }\n  }\n\n  /**\n   * Move the Carousel to the left a\n   * @param  position : number places to move\n   */\n  public moveToLeft(position: number): void {\n    for (let i = 0; i < this.carouselItems.length; i++) {\n      let moveUnit = -(this.itemWidth * position);\n      if ((i - position) < 0) {\n        moveUnit = (this.itemWidth * (this.carouselItems.length - position));\n      }\n      this.transform(i, moveUnit);\n    }\n  }\n\n  private transform(index: number, moveUnit: number): void {\n    this.setStyle(this.carouselItems[index], 'transform', `translate3d(${moveUnit}px, 0, 0)`);\n    setTimeout(() => {\n      this.removeClass();\n    }, 600);\n  }\n\n  private removeClass(): void {\n    for (let i = 0; i < this.carouselItems.length; i++) {\n      this.renderer.setElementClass(this.carouselItems[i], 'faded', false);\n    }\n  }\n}\n"]}